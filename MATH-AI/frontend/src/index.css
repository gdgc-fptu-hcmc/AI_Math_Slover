@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
    --nebula-slate: #0f172a;
    --nebula-cyan: #38bdf8;
    --nebula-emerald: #34d399;
    --nebula-indigo: #6366f1;
    --nebula-rose: #f472b6;
    --nebula-slate-soft: rgba(15, 23, 42, 0.92);
    --nebula-grid: rgba(148, 163, 184, 0.08);
    color-scheme: dark;
}

@layer base {
    *,
    *::before,
    *::after {
        box-sizing: border-box;
    }

    html,
    body {
        height: 100%;
    }

    body {
        @apply font-sans text-slate-100 antialiased;
        background:
            radial-gradient(
                circle at 20% 20%,
                rgba(56, 189, 248, 0.14),
                transparent 60%
            ),
            radial-gradient(
                circle at 78% 12%,
                rgba(99, 102, 241, 0.12),
                transparent 65%
            ),
            linear-gradient(160deg, #020617 0%, #0f172a 55%, #020617 100%);
    }

    #root {
        @apply min-h-screen;
    }
}

/* Utility Layers */
@layer utilities {
    .scrollbar-thin::-webkit-scrollbar {
        width: 6px;
        height: 6px;
    }

    .scrollbar-thin::-webkit-scrollbar-track {
        background: rgba(15, 23, 42, 0.45);
        border-radius: 999px;
    }

    .scrollbar-thin::-webkit-scrollbar-thumb {
        background: linear-gradient(
            180deg,
            rgba(56, 189, 248, 0.75),
            rgba(129, 230, 217, 0.6)
        );
        border-radius: 999px;
    }

    .scrollbar-thin::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(
            180deg,
            rgba(56, 189, 248, 0.9),
            rgba(52, 211, 153, 0.8)
        );
    }

    .neon-border {
        box-shadow:
            0 8px 24px -12px rgba(56, 189, 248, 0.65),
            0 0 0 1px rgba(56, 189, 248, 0.2);
    }

    .glow-ring {
        box-shadow:
            inset 0 0 0 1px rgba(56, 189, 248, 0.25),
            0 20px 45px -30px rgba(14, 165, 233, 0.65);
    }
}

/* Grid Overlay (optional helper) */
.math-grid::before {
    content: "";
    position: absolute;
    inset: 0;
    background-image:
        linear-gradient(to right, var(--nebula-grid) 1px, transparent 1px),
        linear-gradient(to bottom, var(--nebula-grid) 1px, transparent 1px);
    background-size: 120px 120px;
    opacity: 0.55;
    pointer-events: none;
    z-index: 0;
}

/* Animations */
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translate3d(0, 16px, 0);
    }
    to {
        opacity: 1;
        transform: translate3d(0, 0, 0);
    }
}

@keyframes dotPulse {
    0%,
    80%,
    100% {
        opacity: 0.2;
    }
    40% {
        opacity: 1;
    }
}

@keyframes shimmer {
    0% {
        transform: translateX(-100%);
    }
    100% {
        transform: translateX(150%);
    }
}

.animate-fade-in {
    animation: fadeIn 0.35s ease-out;
}

.loading-dot {
    animation: dotPulse 1.4s infinite;
}

.loading-dot:nth-child(2) {
    animation-delay: 0.2s;
}

.loading-dot:nth-child(3) {
    animation-delay: 0.4s;
}

/* Message Bubbles */
.message-user {
    @apply rounded-3xl rounded-tr-md border border-cyan-300/40 bg-gradient-to-br from-sky-500/90 via-cyan-500/90 to-emerald-400/80 px-5 py-4 text-slate-950 shadow-[0_25px_70px_-35px_rgba(56,189,248,0.85)];
}

.message-assistant {
    @apply rounded-3xl rounded-tl-md border border-slate-700/60 bg-slate-900/70 px-5 py-4 text-slate-100 shadow-[0_32px_90px_-40px_rgba(8,47,73,0.95)] backdrop-blur-xl;
}

/* Buttons */
.btn-primary {
    @apply rounded-2xl bg-gradient-to-r from-sky-500 via-cyan-500 to-emerald-400 px-6 py-3 font-semibold text-slate-950 shadow-lg shadow-sky-900/40 transition;
}

.btn-primary:hover {
    @apply from-sky-400 via-cyan-400 to-emerald-300;
}

.btn-secondary {
    @apply rounded-2xl border border-slate-700/70 bg-slate-900/80 px-5 py-2.5 font-medium text-slate-200 transition;
}

.btn-secondary:hover {
    @apply border-sky-400/70 text-sky-100;
}

.btn-icon {
    @apply rounded-full border border-slate-700/60 bg-slate-900/70 p-2.5 text-slate-200 transition;
}

.btn-icon:hover {
    @apply border-sky-400/60 text-sky-100;
}

/* Input Fields */
.input-field,
.textarea-field {
    @apply w-full rounded-2xl border border-slate-700/70 bg-slate-900/70 px-5 py-3 text-base text-slate-100 transition placeholder:text-slate-500 focus:border-sky-400/70 focus:outline-none focus:ring-2 focus:ring-sky-500/40;
    resize: none;
}

/* Cards */
.card {
    @apply rounded-3xl border border-slate-800/60 bg-slate-950/60 p-6 shadow-[0_28px_70px_-50px_rgba(8,47,73,0.8)];
}

.card-hover {
    @apply rounded-3xl border border-slate-800/60 bg-slate-950/60 p-6 shadow-[0_28px_70px_-50px_rgba(8,47,73,0.8)] transition;
}

.card-hover:hover {
    box-shadow:
        0 22px 70px -40px rgba(56, 189, 248, 0.65),
        0 0 0 1px rgba(56, 189, 248, 0.28);
    border-color: rgba(56, 189, 248, 0.5);
}

/* Code Blocks */
.code-block {
    @apply rounded-3xl border border-slate-800/60 bg-slate-900/80 p-5 text-sm text-slate-100 shadow-inner shadow-slate-950/70;
}

/* Video Container */
.video-container {
    @apply relative w-full overflow-hidden rounded-3xl bg-black;
    aspect-ratio: 16 / 9;
}

/* Dropzone Helper */
.dropzone {
    @apply rounded-3xl border-2 border-dashed border-slate-700/70 bg-slate-950/60 p-8 text-center transition;
}

.dropzone:hover {
    box-shadow:
        0 25px 65px -45px rgba(56, 189, 248, 0.75),
        0 0 0 1px rgba(56, 189, 248, 0.25);
    border-color: rgba(56, 189, 248, 0.55);
    background: rgba(15, 23, 42, 0.85);
}

.dropzone.active {
    border-color: rgba(56, 189, 248, 0.75);
    background: rgba(8, 145, 178, 0.14);
}

/* Webcam Preview */
.webcam-preview {
    @apply relative rounded-3xl border border-slate-800/60 bg-slate-950/70 shadow-[0_35px_90px_-45px_rgba(8,47,73,0.85)];
    aspect-ratio: 4 / 3;
}

/* Gradient Divider */
.divider-gradient {
    height: 1px;
    background: linear-gradient(
        90deg,
        transparent,
        rgba(56, 189, 248, 0.45),
        transparent
    );
}

/* Text Gradient */
.text-gradient {
    background: linear-gradient(
        90deg,
        rgba(56, 189, 248, 0.85),
        rgba(129, 230, 217, 0.85)
    );
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

/* Header Accent */
.heading-accent {
    position: relative;
    display: inline-block;
}

.heading-accent::after {
    content: "";
    position: absolute;
    left: 0;
    bottom: -10px;
    width: 100%;
    height: 2px;
    background: linear-gradient(
        90deg,
        rgba(56, 189, 248, 0.65),
        rgba(129, 230, 217, 0.35)
    );
    transform-origin: left;
    transform: scaleX(0.45);
    transition: transform 0.4s ease;
}

.heading-accent:hover::after {
    transform: scaleX(1);
}

/* Shimmer Accent */
.shimmer-accent {
    position: relative;
    overflow: hidden;
}

.shimmer-accent::after {
    content: "";
    position: absolute;
    inset: 0;
    transform: translateX(-100%);
    background: linear-gradient(
        120deg,
        transparent 0%,
        rgba(255, 255, 255, 0.18) 50%,
        transparent 100%
    );
    animation: shimmer 2.2s infinite;
    pointer-events: none;
}

/* Toast Overrides */
.math-toast {
    background: rgba(15, 23, 42, 0.92);
    color: #e0f2fe;
    border: 1px solid rgba(148, 163, 184, 0.35);
    backdrop-filter: blur(12px);
    box-shadow: 0 28px 60px -35px rgba(56, 189, 248, 0.5);
}

/* Badge */
.badge {
    @apply rounded-full border border-slate-700/70 bg-slate-900/80 px-3 py-1 text-[0.625rem] font-mono uppercase tracking-[0.35em] text-slate-300;
}

/* Panel */
.panel {
    @apply relative overflow-hidden rounded-[2rem] border border-slate-800/60 bg-slate-950/70 p-8 shadow-[0_40px_120px_-60px_rgba(8,47,73,0.85)];
    backdrop-filter: blur(20px);
}

/* Ambient Symbol Styles */
.ambient-symbol {
    font-family: "IBM Plex Sans", "Inter", "Helvetica Neue", sans-serif;
    letter-spacing: 0.1em;
    text-shadow: 0 18px 45px rgba(56, 189, 248, 0.35);
    mix-blend-mode: screen;
}
